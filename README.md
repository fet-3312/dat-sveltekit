# DTA SvelteKit é–‹ç™¼æ¨£æ¿

DTA åœ˜éšŠçš„ SvelteKit å°ˆæ¡ˆæ¨£æ¿ï¼Œæä¾›æ¨™æº–åŒ–çš„é–‹ç™¼ç’°å¢ƒèˆ‡æœ€ä½³å¯¦è¸é…ç½®ã€‚

---

## ğŸ“¦ åœ˜éšŠæˆå“¡å¦‚ä½•ä½¿ç”¨æ­¤æ¨£æ¿

### å‰ç½®éœ€æ±‚

ç¢ºä¿å·²å®‰è£ä»¥ä¸‹å·¥å…·ï¼š

```sh
# æª¢æŸ¥ Node.js ç‰ˆæœ¬ï¼ˆéœ€ >= 20.xï¼‰
node -v

# æª¢æŸ¥ pnpm ç‰ˆæœ¬ï¼ˆéœ€ >= 9.xï¼‰
pnpm -v

# å¦‚æœå°šæœªå•Ÿç”¨ pnpmï¼Œè«‹åŸ·è¡Œ
corepack enable pnpm
corepack prepare pnpm@latest --activate
```

### å»ºç«‹æ–°å°ˆæ¡ˆï¼ˆ3 æ­¥é©Ÿï¼‰

```sh
# 1ï¸âƒ£ è¤‡è£½æ¨£æ¿åˆ°æ–°ç›®éŒ„
npx degit fet-3312/dat-sveltekit my-project

# 2ï¸âƒ£ é€²å…¥ç›®éŒ„ä¸¦åŸ·è¡Œåˆå§‹åŒ–
cd my-project
node setup.js

# 3ï¸âƒ£ å®‰è£ä¾è³´ä¸¦å•Ÿå‹•
pnpm install
pnpm dev
```

### åˆå§‹åŒ–éç¨‹èªªæ˜

åŸ·è¡Œ `node setup.js` æ™‚ï¼Œè…³æœ¬æœƒäº’å‹•å¼è©¢å•ï¼š

```
ğŸ¢ DTA SvelteKit å°ˆæ¡ˆåˆå§‹åŒ–

? å°ˆæ¡ˆåç¨± (my-project): my-awesome-app
? å°ˆæ¡ˆæè¿°: æˆ‘çš„è¶…æ£’æ‡‰ç”¨ç¨‹å¼

âœ” å·²æ›´æ–° package.json
âœ” å·²æ›´æ–° README.md
âœ” å·²å»ºç«‹ .env
âœ” å·²åˆå§‹åŒ– Git
âœ” å·²æ¸…ç†æ¨£æ¿æª”æ¡ˆ

âœ” å°ˆæ¡ˆåˆå§‹åŒ–å®Œæˆï¼

  ä¸‹ä¸€æ­¥ï¼š
  pnpm install
  pnpm dev
```

**è…³æœ¬æœƒè‡ªå‹•å®Œæˆï¼š**

| å‹•ä½œ                | èªªæ˜                                   |
| ------------------- | -------------------------------------- |
| æ›´æ–° `package.json` | è¨­å®šå°ˆæ¡ˆåç¨±ã€æè¿°ï¼Œç‰ˆæœ¬é‡è¨­ç‚º `0.0.1` |
| æ›´æ–° `README.md`    | æ›¿æ›æ¨™é¡Œç‚ºä½ çš„å°ˆæ¡ˆåç¨±                 |
| å»ºç«‹ `.env`         | å¾ `.env.example` è¤‡è£½ç’°å¢ƒè®Šæ•¸ç¯„æœ¬     |
| åˆå§‹åŒ– Git          | åŸ·è¡Œ `git init`ï¼ˆå¦‚æœéœ€è¦ï¼‰            |
| æ¸…ç†æ¨£æ¿æª”æ¡ˆ        | åˆªé™¤ `setup.js` ç­‰åªæœ‰æ¨£æ¿éœ€è¦çš„æª”æ¡ˆ   |

### ä¸€è¡ŒæŒ‡ä»¤å¿«é€Ÿå»ºç«‹

å¦‚æœä½ ç†Ÿæ‚‰æµç¨‹ï¼Œå¯ä»¥ç”¨ä¸€è¡ŒæŒ‡ä»¤å®Œæˆï¼š

```sh
npx degit fet-3312/dat-sveltekit my-project && cd my-project && node setup.js
```

ç„¶å¾Œä¾ç…§æç¤ºè¼¸å…¥å°ˆæ¡ˆåç¨±å³å¯ã€‚

---

## å°ˆæ¡ˆç°¡ä»‹

é€™æ˜¯ä¸€å€‹åŸºæ–¼ **SvelteKit 2 + Svelte 5** çš„éœæ…‹ç¶²ç«™é–‹ç™¼æ¨£æ¿ï¼Œå°ˆç‚º DTA åœ˜éšŠè¨­è¨ˆã€‚

### ä¸»è¦ç‰¹è‰²

- âš¡ **Svelte 5** â€” ä½¿ç”¨æœ€æ–°çš„ Runes éŸ¿æ‡‰å¼èªæ³•
- ğŸ—ï¸ **SvelteKit 2** â€” æª”æ¡ˆå¼è·¯ç”±èˆ‡ç¾ä»£åŒ–å»ºæ§‹
- ğŸ“¦ **éœæ…‹éƒ¨ç½²** â€” é€é `adapter-static` è¼¸å‡ºç´”éœæ…‹æª”æ¡ˆ
- ğŸ¨ **PostCSS** â€” æ”¯æ´å·¢ç‹€èªæ³•èˆ‡ç¾ä»£ CSS ç‰¹æ€§
- âœ… **TypeScript** â€” å®Œæ•´çš„å‹åˆ¥å®‰å…¨
- ğŸ§ª **æ¸¬è©¦æ•´åˆ** â€” Vitest (å–®å…ƒ) + Playwright (E2E)
- ğŸ”§ **ç¨‹å¼ç¢¼å“è³ª** â€” ESLint + Prettier + Husky é æäº¤æª¢æŸ¥

---

## ç³»çµ±éœ€æ±‚

| å·¥å…·    | ç‰ˆæœ¬éœ€æ±‚ |
| ------- | -------- |
| Node.js | >= 20.x  |
| pnpm    | >= 9.x   |

> âš ï¸ æœ¬å°ˆæ¡ˆ**åƒ…æ”¯æ´ pnpm**ï¼Œè«‹å‹¿ä½¿ç”¨ npm æˆ– yarnã€‚

---

## å¯ç”¨æŒ‡ä»¤

| æŒ‡ä»¤               | èªªæ˜                               |
| ------------------ | ---------------------------------- |
| `pnpm dev`         | å•Ÿå‹•é–‹ç™¼ä¼ºæœå™¨                     |
| `pnpm build`       | å»ºæ§‹æ­£å¼ç‰ˆæœ¬                       |
| `pnpm preview`     | é è¦½æ­£å¼ç‰ˆæœ¬                       |
| `pnpm check`       | åŸ·è¡Œ Svelte èˆ‡ TypeScript å‹åˆ¥æª¢æŸ¥ |
| `pnpm check:watch` | ç›£è½æ¨¡å¼å‹åˆ¥æª¢æŸ¥                   |
| `pnpm lint`        | åŸ·è¡Œ ESLint èˆ‡ Prettier æª¢æŸ¥       |
| `pnpm format`      | è‡ªå‹•æ ¼å¼åŒ–ç¨‹å¼ç¢¼                   |
| `pnpm test`        | åŸ·è¡Œæ‰€æœ‰æ¸¬è©¦                       |
| `pnpm test:unit`   | åŸ·è¡Œå–®å…ƒæ¸¬è©¦ (Vitest)              |
| `pnpm test:e2e`    | åŸ·è¡Œç«¯å°ç«¯æ¸¬è©¦ (Playwright)        |

---

## å°ˆæ¡ˆçµæ§‹

```
dta-sveltekit/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ routes/          # SvelteKit é é¢è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ +layout.svelte
â”‚   â”‚   â””â”€â”€ +page.svelte
â”‚   â”œâ”€â”€ lib/             # å…±ç”¨å…ƒä»¶èˆ‡å·¥å…·
â”‚   â”‚   â”œâ”€â”€ assets/      # åœ–ç‰‡ã€å­—å‹ç­‰éœæ…‹è³‡æº
â”‚   â”‚   â””â”€â”€ index.ts     # æ¨¡çµ„åŒ¯å‡ºå…¥å£
â”‚   â”œâ”€â”€ app.html         # HTML æ¨¡æ¿
â”‚   â””â”€â”€ app.d.ts         # å…¨åŸŸå‹åˆ¥å®šç¾©
â”œâ”€â”€ static/              # ä¸ç¶“è™•ç†çš„éœæ…‹æª”æ¡ˆ
â”œâ”€â”€ e2e/                 # Playwright E2E æ¸¬è©¦
â”œâ”€â”€ svelte.config.js     # SvelteKit é…ç½®
â”œâ”€â”€ vite.config.ts       # Vite é…ç½® (å« Vitest)
â”œâ”€â”€ tsconfig.json        # TypeScript é…ç½®
â”œâ”€â”€ eslint.config.js     # ESLint é…ç½®
â””â”€â”€ playwright.config.ts # Playwright é…ç½®
```

---

## ç’°å¢ƒè®Šæ•¸

æœ¬å°ˆæ¡ˆä½¿ç”¨ SvelteKit çš„ç’°å¢ƒè®Šæ•¸æ©Ÿåˆ¶ã€‚å…¬é–‹è®Šæ•¸éœ€ä»¥ `PUBLIC_` å‰ç¶´å‘½åã€‚

| è®Šæ•¸åç¨±           | èªªæ˜                                | å¿…å¡« | é è¨­å€¼ | ç¯„ä¾‹      |
| ------------------ | ----------------------------------- | :--: | ------ | --------- |
| `PUBLIC_BASE_PATH` | æ‡‰ç”¨ç¨‹å¼çš„å­è·¯å¾‘ (ç”¨æ–¼éæ ¹ç›®éŒ„éƒ¨ç½²) |  å¦  | `""`   | `/my-app` |

### è¨­å®šæ–¹å¼

1. è¤‡è£½ç¯„æœ¬æª”ï¼ˆå¦‚æœ‰æä¾›ï¼‰ï¼š

   ```sh
   cp .env.example .env
   ```

2. æˆ–ç›´æ¥å»ºç«‹ `.env` æª”æ¡ˆï¼š
   ```env
   PUBLIC_BASE_PATH=/my-app
   ```

> ğŸ’¡ éœæ…‹éƒ¨ç½²æ™‚ï¼ŒåŸ·è¡Œéšæ®µé…ç½®å»ºè­°é€é `static/` ç›®éŒ„ä¸‹çš„ JSON æª”æ¡ˆè¼‰å…¥ã€‚

---

## é–‹ç™¼è¦ç¯„

### Svelte 5 Runes

æœ¬å°ˆæ¡ˆä½¿ç”¨ Svelte 5 çš„ Runes èªæ³•ï¼Œè«‹ä½¿ç”¨ `$state`ã€`$derived`ã€`$effect` ç­‰æ–°èªæ³•ï¼Œé¿å…ä½¿ç”¨èˆŠç‰ˆ `onMount` / stores æ¨¡å¼ã€‚

```svelte
<script lang="ts">
	let count = $state(0)
	let doubled = $derived(count * 2)
</script>
```

### æ¨£å¼æ’°å¯«

ä½¿ç”¨ PostCSS å·¢ç‹€èªæ³•ï¼š

```svelte
<style lang="postcss">
	.container {
		padding: 1rem;

		& .title {
			font-size: 1.5rem;
		}
	}
</style>
```

### è·¯å¾‘è™•ç†

ç”±æ–¼å¯èƒ½éƒ¨ç½²è‡³å­è·¯å¾‘ï¼Œè«‹ä½¿ç”¨ `$app/paths` è™•ç†é€£çµï¼š

```svelte
<script>
	import { base } from '$app/paths'
</script>

<a href="{base}/about">é—œæ–¼æˆ‘å€‘</a>
<img src="{base}/images/logo.png" alt="Logo" />
```

---

## æ¸¬è©¦

### å–®å…ƒæ¸¬è©¦ (Vitest)

```sh
pnpm test:unit
```

æ¸¬è©¦æª”æ¡ˆå‘½åè¦å‰‡ï¼š

- Svelte å…ƒä»¶æ¸¬è©¦ï¼š`*.svelte.spec.ts`
- ä¸€èˆ¬å–®å…ƒæ¸¬è©¦ï¼š`*.spec.ts` æˆ– `*.test.ts`

### E2E æ¸¬è©¦ (Playwright)

```sh
pnpm test:e2e
```

æ¸¬è©¦æª”æ¡ˆä½æ–¼ `e2e/` ç›®éŒ„ã€‚

---

## å»ºæ§‹èˆ‡éƒ¨ç½²

### å»ºæ§‹æ­£å¼ç‰ˆæœ¬

```sh
pnpm build
```

å»ºæ§‹ç”¢ç‰©è¼¸å‡ºè‡³ `build/` ç›®éŒ„ï¼Œå¯ç›´æ¥éƒ¨ç½²è‡³ä»»ä½•éœæ…‹æª”æ¡ˆä¼ºæœå™¨ã€‚

### æœ¬æ©Ÿé è¦½

```sh
pnpm preview
```

é è¦½ä¼ºæœå™¨é‹è¡Œæ–¼ http://localhost:4173

### éƒ¨ç½²æ³¨æ„äº‹é …

- âœ… æœ¬å°ˆæ¡ˆä½¿ç”¨ `adapter-static`ï¼Œåƒ…ç”¢å‡ºéœæ…‹æª”æ¡ˆ
- âŒ ä¸æ”¯æ´ Server-Side Rendering (SSR) æˆ– API Routes
- ğŸŒ æ”¯æ´éƒ¨ç½²è‡³ GitHub Pagesã€Netlifyã€Vercel (éœæ…‹æ¨¡å¼) ç­‰å¹³å°

---

## ç¨‹å¼ç¢¼å“è³ª

æäº¤å‰è«‹ç¢ºä¿ï¼š

```sh
pnpm format   # æ ¼å¼åŒ–ç¨‹å¼ç¢¼
pnpm check    # å‹åˆ¥æª¢æŸ¥
pnpm lint     # Lint æª¢æŸ¥
```

Husky æœƒåœ¨ `git commit` æ™‚è‡ªå‹•åŸ·è¡Œé æäº¤æª¢æŸ¥ã€‚

---

## è²¢ç»æŒ‡å—

1. éµå¾ª [Copilot æŒ‡å¼•](.github/copilot-instructions.md) ä¸­çš„é–‹ç™¼è¦ç¯„
2. ç¢ºä¿æ‰€æœ‰æª¢æŸ¥é€šéå¾Œå†æäº¤
3. æ’°å¯«æ¸…æ¥šçš„ commit message

---

## æˆæ¬Š

DTA åœ˜éšŠå…§éƒ¨ä½¿ç”¨
